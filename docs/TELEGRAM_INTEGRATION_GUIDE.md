# 📱 텔레그램 연동 자동매매 시스템 구축 가이드

## 📋 개요

이 가이드는 트레이딩뷰 신호를 텔레그램을 통해 받아서 크롬 익스텐션으로 자동매매를 실행하는 완전 자동화 시스템 구축 방법을 설명합니다.

### 🎯 시스템 구조
```
트레이딩뷰 지표 → 웹훅 → 텔레그램 봇 → 크롬 익스텐션 → 거래소 매크로 실행
```

### ⏱️ 총 소요시간: 약 2시간
- 기본 준비: 30분
- 매크로 설정: 1시간  
- 트레이딩뷰 연동: 30분

---

## 🎯 Phase 1: 기본 준비 작업 (30분)

### 1-1. 텔레그램 봇 생성 (5분)

#### 단계별 진행:
1. **텔레그램 앱에서 @BotFather 검색**
2. **봇 생성 명령어 입력:**
   ```
   /newbot
   ```
3. **봇 이름 입력 (예시):**
   ```
   MyTradingBot
   ```
4. **봇 사용자명 입력 (예시):**
   ```
   my_trading_bot
   ```
5. **봇 토큰 받기 및 저장:**
   ```
   예시: 123456789:ABCdefGHIjklMNOpqrsTUVwxyz
   ```

⚠️ **중요**: 봇 토큰은 절대 다른 사람과 공유하지 마세요!

### 1-2. 채팅 ID 확인 (3분)

#### 단계별 진행:
1. **생성한 봇에게 메시지 전송:**
   ```
   안녕하세요
   ```

2. **브라우저에서 다음 주소 접속:**
   ```
   https://api.telegram.org/bot[봇토큰]/getUpdates
   ```
   
3. **결과에서 채팅 ID 찾기:**
   ```json
   {
     "ok": true,
     "result": [
       {
         "message": {
           "chat": {
             "id": 987654321,  ← 이 숫자가 채팅 ID
             "type": "private"
           }
         }
       }
     ]
   }
   ```

4. **채팅 ID 저장 (예시: 987654321)**

### 1-3. PC 전원 설정 변경 (5분)

#### Windows 설정:
1. **제어판 → 전원 옵션 접속**
2. **"계획 설정 변경" 클릭**
3. **다음과 같이 설정:**
   - 절전 모드로 전환: **안함**
   - 디스플레이 끄기: **30분** (원하는 시간)

4. **"고급 전원 설정 변경" 클릭**
5. **다음 항목 설정:**
   - USB 선택적 일시 중단 설정: **사용 안 함**
   - 하드 디스크: **안함**

#### 설정 이유:
- ✅ 화면보호기/모니터 끄기: 익스텐션 정상 작동
- ❌ 절전 모드: 익스텐션 완전 중단
- ❌ 최대절전 모드: PC 완전 종료

### 1-4. 크롬 익스텐션 설치 (10분)

#### 설치 과정:
1. **프로젝트 폴더 다운로드**
2. **Chrome에서 `chrome://extensions/` 접속**
3. **우상단 "개발자 모드" 토글 활성화**
4. **"압축해제된 확장 프로그램을 로드합니다" 클릭**
5. **다운로드한 프로젝트 폴더 선택**
6. **익스텐션 설치 완료 확인**

### 1-5. 기본 연결 테스트 (7분)

#### 테스트 과정:
1. **거래소 페이지 접속** (Gate.io, Binance 등)
2. **익스텐션 아이콘 클릭하여 팝업 열기**
3. **텔레그램 설정 섹션에서:**
   - 봇 토큰 입력
   - "테스트" 버튼 클릭
4. **연결 상태 확인:**
   - ✅ 성공: "연결됨: @봇이름"
   - ❌ 실패: "연결 실패" → 토큰 재확인

---

## 🎯 Phase 2: 매크로 설정 (1시간)

### 2-1. 자산/가격 추출 설정 (20분)

#### 자산 추출 설정:
1. **거래소에서 거래할 종목 페이지 접속**
2. **익스텐션 팝업에서 "Assets Extraction" 버튼 클릭**
3. **요소 선택 모드 활성화됨 (십자가 커서)**
4. **자산 금액이 표시된 요소 클릭**
   - 예: "1,234.56 USDT" 부분
5. **자산 추출 성공 확인**

#### 가격 추출 설정:
1. **"Price Extraction" 버튼 클릭**
2. **현재가가 표시된 요소 클릭**
   - 예: "43,250.50" 부분
3. **가격 추출 성공 확인**
4. **Amount 자동 계산 확인**
   - 공식: Assets × Leverage × Position% ÷ Price

#### 설정 확인:
- Current Assets: 실시간 자산 표시
- Current Price: 실시간 가격 표시  
- Current Amount: 자동 계산된 거래량

### 2-2. Long 매크로 녹화 (20분)

#### 녹화 준비:
1. **거래소에서 매수 주문 페이지 준비**
2. **소액으로 테스트 주문 준비**

#### 녹화 과정:
1. **"Long Record" 버튼 클릭**
2. **녹화 모드 시작 확인 (빨간색 "Stop Recording" 표시)**
3. **매수 과정을 순서대로 클릭:**
   - Open 탭 클릭 (Hedge 모드인 경우)
   - Long/Buy 버튼 클릭
   - Amount 입력 필드 클릭
   - Market 주문 선택 (필요시)
   - 주문 확인 버튼 클릭 (실제 주문 전에 취소)
4. **ESC 키로 녹화 완료**
5. **"Long 매크로 저장 완료!" 메시지 확인**

#### 매크로 테스트:
1. **"Manual Long" 버튼 클릭**
2. **매크로가 정확히 실행되는지 확인**
3. **문제 발생 시 매크로 재녹화**

### 2-3. Short 매크로 녹화 (20분)

#### 녹화 과정:
1. **"Short Record" 버튼 클릭**
2. **녹화 모드 시작**
3. **매도 과정을 순서대로 클릭:**
   - Open 탭 클릭 (Hedge 모드인 경우)
   - Short/Sell 버튼 클릭
   - Amount 입력 필드 클릭
   - Market 주문 선택 (필요시)
   - 주문 확인 버튼 클릭 (실제 주문 전에 취소)
4. **ESC 키로 녹화 완료**
5. **"Short 매크로 저장 완료!" 메시지 확인**

#### 매크로 테스트:
1. **"Manual Short" 버튼 클릭**
2. **매크로가 정확히 실행되는지 확인**

---

## 🎯 Phase 3: 트레이딩뷰 연동 (30분)

### 3-1. 트레이딩뷰 매수 알림 설정 (15분)

#### 알림 생성:
1. **트레이딩뷰에서 원하는 차트 접속**
2. **지표 추가 (볼린저 밴드 권장)**
3. **알림 생성 버튼 클릭**
4. **조건 설정:**
   ```
   조건: 가격이 볼린저 밴드 하단선 아래로
   ```

5. **액션 설정:**
   ```
   액션: 웹훅 URL
   URL: https://api.telegram.org/bot[봇토큰]/sendMessage
   ```

6. **메시지 본문:**
   ```json
   {
     "chat_id": "[채팅ID]",
     "text": "BUY {{ticker}} @ {{close}}"
   }
   ```

7. **알림 저장**

### 3-2. 트레이딩뷰 매도 알림 설정 (15분)

#### 알림 생성:
1. **새 알림 생성**
2. **조건 설정:**
   ```
   조건: 가격이 볼린저 밴드 중앙선 위로
   ```

3. **액션 설정:**
   ```
   액션: 웹훅 URL
   URL: https://api.telegram.org/bot[봇토큰]/sendMessage
   ```

4. **메시지 본문:**
   ```json
   {
     "chat_id": "[채팅ID]",
     "text": "SELL {{ticker}} @ {{close}}"
   }
   ```

5. **알림 저장**

#### 테스트:
1. **테스트 알림 전송**
2. **텔레그램 봇에서 메시지 수신 확인**
3. **익스텐션에서 신호 감지 확인**

---

## 🎯 Phase 4: 최종 테스트 및 운영 (30분)

### 4-1. 전체 시스템 테스트 (15분)

#### 수동 신호 테스트:
1. **텔레그램 봇에게 메시지 전송:**
   ```
   BUY BTCUSDT
   ```
2. **익스텐션이 3초 내 감지하는지 확인**
3. **Long 매크로가 자동 실행되는지 확인**

4. **매도 신호 테스트:**
   ```
   SELL BTCUSDT
   ```
5. **Short 매크로가 자동 실행되는지 확인**

#### 트레이딩뷰 신호 테스트:
1. **트레이딩뷰에서 테스트 알림 발송**
2. **텔레그램으로 신호 수신 확인**
3. **익스텐션에서 자동 매크로 실행 확인**

### 4-2. 안전 설정 (10분)

#### 리스크 관리 설정:
1. **레버리지 설정:**
   - 초보자: 1-2배
   - 경험자: 3-5배
   - 고급자: 5-10배

2. **포지션 크기 설정:**
   - 보수적: 5-10%
   - 일반적: 10-20%
   - 공격적: 20-50%

3. **스탑로스 설정:**
   - 안전: 1-2%
   - 일반: 2-5%
   - 위험: 5-10%

#### 거래 시간 설정:
1. **활성 거래 시간대 설정**
2. **야간 거래 여부 결정**
3. **주말 거래 여부 결정**

### 4-3. 모니터링 설정 (5분)

#### 브라우저 설정:
1. **거래소 탭을 고정 탭으로 설정**
2. **다른 불필요한 탭들 정리**
3. **북마크 정리**

#### 시스템 설정:
1. **화면보호기 설정 (선택사항)**
2. **자동 업데이트 시간 조정**
3. **백그라운드 앱 정리**

---

## 📊 작업 체크리스트

### ✅ 설정 완료 확인사항

#### 기본 연결:
- [ ] 텔레그램 봇이 정상 작동하는가?
- [ ] 익스텐션이 봇 토큰을 인식하는가?
- [ ] 채팅 ID가 올바르게 설정되었는가?

#### 데이터 추출:
- [ ] 자산 금액이 실시간으로 표시되는가?
- [ ] 현재가가 실시간으로 업데이트되는가?
- [ ] Amount가 올바르게 자동 계산되는가?

#### 매크로 동작:
- [ ] Long 매크로가 정확히 실행되는가?
- [ ] Short 매크로가 정확히 실행되는가?
- [ ] Amount 값이 올바르게 입력되는가?

#### 신호 수신:
- [ ] 텔레그램 메시지를 3초 내 감지하는가?
- [ ] "BUY" 신호가 Long 매크로를 실행하는가?
- [ ] "SELL" 신호가 Short 매크로를 실행하는가?

#### 시스템 안정성:
- [ ] 화면보호기 상태에서도 작동하는가?
- [ ] 절전 모드가 비활성화되어 있는가?
- [ ] 브라우저가 최소화되지 않도록 설정했는가?

### ⚠️ 운영 중 주의사항

#### 일일 점검:
- [ ] 아침에 시스템 상태 확인
- [ ] 익스텐션 연결 상태 확인
- [ ] 매크로 동작 상태 확인

#### 주간 점검:
- [ ] 매크로 테스트 실행
- [ ] 거래소 페이지 변경사항 확인
- [ ] 성과 분석 및 설정 최적화

#### 월간 점검:
- [ ] 전체 시스템 재점검
- [ ] 매크로 재녹화 (필요시)
- [ ] 전략 성과 분석

---

## 🛠️ 필요한 준비물

### 필수 준비물:
- ✅ **Windows PC** (24시간 켜둘 수 있는 환경)
- ✅ **안정적인 인터넷 연결**
- ✅ **Chrome 브라우저**
- ✅ **텔레그램 계정**
- ✅ **거래소 계정** (Gate.io, Binance 등)

### 선택 준비물:
- 📋 **트레이딩뷰 계정** (무료/유료)
- 📋 **VPS 서버** (24시간 운영용)
- 📋 **UPS** (정전 대비)

---

## 🚨 문제 해결 가이드

### 자주 발생하는 문제들

#### 1. "텔레그램 연결 실패"
**원인:** 잘못된 봇 토큰
**해결:** 
- 봇 토큰 재확인
- @BotFather에서 새 토큰 생성

#### 2. "메시지 감지 안됨"
**원인:** 채팅 ID 오류 또는 폴링 중단
**해결:**
- 채팅 ID 재확인
- 브라우저 새로고침
- 익스텐션 재시작

#### 3. "매크로 실행 실패"
**원인:** 거래소 페이지 변경 또는 요소 변경
**해결:**
- 매크로 재녹화
- 거래소 페이지 새로고침
- 다른 거래소 시도

#### 4. "Amount 계산 오류"
**원인:** 자산/가격 추출 실패
**해결:**
- 자산/가격 셀렉터 재설정
- 페이지 새로고침 후 재시도

#### 5. "화면보호기에서 중단"
**원인:** 절전 모드 활성화
**해결:**
- 전원 설정에서 절전 모드 비활성화
- 브라우저 최소화 금지

---

## 📈 성능 최적화 팁

### 시스템 최적화:
1. **불필요한 프로그램 종료**
2. **백그라운드 앱 최소화**
3. **자동 업데이트 시간 조정**
4. **디스크 정리 정기 실행**

### 네트워크 최적화:
1. **안정적인 인터넷 연결 사용**
2. **VPN 사용 시 속도 확인**
3. **방화벽 예외 설정**

### 브라우저 최적화:
1. **Chrome 업데이트 유지**
2. **불필요한 익스텐션 비활성화**
3. **캐시 정기 정리**
4. **메모리 사용량 모니터링**

---

## 💡 고급 활용 팁

### 다중 종목 거래:
1. **종목별 탭 분리**
2. **종목별 매크로 설정**
3. **포지션 크기 분산**

### 전략 다양화:
1. **시간대별 전략 변경**
2. **변동성별 레버리지 조정**
3. **시장 상황별 포지션 크기 조정**

### 모니터링 강화:
1. **거래 내역 정기 백업**
2. **성과 분석 스프레드시트 작성**
3. **알림 설정 다양화**

---

## 📞 지원 및 문의

### 문제 발생 시:
1. **문제 상황 스크린샷 촬영**
2. **브라우저 콘솔 로그 확인**
3. **단계별 재시도**

### 개선 제안:
1. **사용 경험 피드백**
2. **새로운 기능 요청**
3. **버그 리포트**

---

**⚠️ 면책 조항**: 이 시스템은 교육 및 연구 목적으로 제공됩니다. 실제 거래에서 발생하는 손실에 대해 개발자는 책임지지 않습니다. 투자는 본인의 책임 하에 진행하시기 바랍니다.

**💡 성공적인 자동매매를 위해서는 충분한 테스트와 리스크 관리가 필수입니다!**
