# 🤖 크롬 익스텐션 기반 암호화폐 자동매매 봇

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Chrome Extension](https://img.shields.io/badge/Chrome-Extension-green.svg)](https://chrome.google.com/webstore)
[![Development Status](https://img.shields.io/badge/Status-Phase%207%20Complete-blue.svg)](docs/IMPLEMENTATION_STEPS.md)

## 📋 프로젝트 개요
사용자가 버튼 위치를 지정하고 매크로를 구성할 수 있는 크롬 익스텐션 기반 암호화폐 자동매매 시스템입니다. 하이브리드 매크로 시스템을 통해 다양한 거래소에서 안정적으로 작동합니다.

> **⚠️ 중요**: 이 프로젝트는 **교육 및 연구 목적**으로 개발되었습니다. 실제 거래 시 발생하는 손실에 대해 개발자는 책임지지 않습니다.

## ✨ 주요 특징
- **🎯 매크로 기반**: 사용자가 직접 버튼 위치 지정 및 매크로 구성
- **💰 자산 관리**: 거래소에서 실시간 자산 불러오기 및 포지션 크기 자동 계산
- **📊 다양한 매매 전략**: 볼린저 밴드, RSI, MACD, 이동평균선, 스토캐스틱 등
- **🔄 지정가/시장가**: 사용자 설정에 따른 주문 타입 선택
- **⚡ 레버리지 지원**: 1-100배 레버리지 설정 가능
- **🌐 다중 거래소 지원**: Gate.io, Binance, Upbit, Coinbase 등
- **🔔 실시간 알림**: 브라우저 알림 및 팝업 알림
- **👤 사용자 친화적**: 직관적인 UI로 쉬운 설정
- **💾 데이터 저장**: 로컬 스토리지 기반 설정 및 거래 내역 저장

## 🚀 현재 개발 상태 (Phase 7 완료)

### ✅ 완료된 기능들
- **기본 구조**: 사이드 패널 형식의 크롬 익스텐션 (Manifest V3)
- **UI 시스템**: 거래소 선택, 설정 관리, 실시간 상태 표시
- **Chrome APIs**: Storage, Tabs, Messages, Scripting API 완전 연동
- **거래소 감지**: 현재 페이지가 지원 거래소인지 자동 감지
- **데이터 추출**: 사용자 지정 셀렉터로 자산/가격 실시간 추출
- **하이브리드 매크로**: 셀렉터 + 키워드 + 위치 기반 3중 백업 시스템
- **스마트 요소 탐지**: Long/Short 버튼 정확한 구분 및 자동 복구
- **Amount 자동 계산**: Assets × Leverage × Position% ÷ Price

### 🔧 핵심 기술적 특징
- **성능 최적화**: Content Script 수동 주입, 이벤트 리스너 최적화
- **안정성**: 텍스트 검증을 통한 버튼 정확성 보장
- **사용자 친화적**: 시각적 피드백, 상태 표시, 상세한 에러 처리

### 📋 다음 구현 예정
- **Phase 8**: 기술적 지표 계산 (볼린저 밴드)
- **Phase 9**: 자동매매 로직 (신호 기반 거래 실행)
- **Phase 10**: 완성된 UI 및 통계 시스템

## 🧪 테스트 방법

### 1. 익스텐션 설치 및 테스트
1. Chrome 브라우저에서 `chrome://extensions/` 접속
2. "개발자 모드" 활성화
3. "압축해제된 확장 프로그램을 로드합니다" 클릭
4. 프로젝트 폴더 선택

### 2. 기본 기능 테스트
1. **지원 거래소 접속**: Gate.io, Binance, Upbit, Coinbase 중 하나
2. **익스텐션 팝업 열기**: 브라우저 툴바의 익스텐션 아이콘 클릭
3. **거래소 감지 확인**: 팝업에서 거래소 이름이 표시되는지 확인
4. **트레이딩 패널 확인**: 거래소 페이지에서 우측 상단에 트레이딩 패널이 나타나는지 확인

### 3. 기능별 테스트
- **자산/가격 연동**: "📍 자산 위치 설정", "📍 가격 위치 설정" 버튼 테스트
- **매크로 녹화**: "매수 매크로 녹화", "매도 매크로 녹화" 버튼 테스트
- **설정 변경**: 전략, 레버리지, 거래 비율 등 설정 변경 테스트
- **상태 확인**: "상태 새로고침" 버튼으로 현재 상태 확인

### 4. 콘솔 로그 확인
개발자 도구(F12) → Console 탭에서 다음 로그들이 정상적으로 출력되는지 확인:
```
🚀 Popup script loaded - IMPROVED VERSION
✅ TechnicalIndicators initialized
✅ MacroEngine initialized
✅ TradingLogic initialized
✅ AssetManager initialized
✅ StorageManager initialized
✅ AssetPriceManager initialized
✅ Background script loaded successfully
```

## 🔧 오류 해결 방법

### "ReferenceError: isSupportedExchange is not defined" 오류
- ✅ **해결됨**: `isSupportedExchange` 함수가 popup.js에 추가되었습니다.

### "Could not establish connection. Receiving end does not exist" 오류
이 오류는 content script가 아직 로드되지 않았을 때 발생합니다.

**해결 방법:**
1. 거래소 페이지를 새로고침(Ctrl+R 또는 F5)
2. 새로고침 후 몇 초 대기
3. 익스텐션 팝업을 다시 열어서 시도

### "No such extension" 오류
이 오류는 익스텐션이 제대로 로드되지 않았을 때 발생합니다.

**해결 방법:**
1. `chrome://extensions/` 페이지에서 익스텐션을 찾으세요
2. 익스텐션을 비활성화했다가 다시 활성화하세요
3. 익스텐션이 새로고침되지 않은 경우 "새로고침" 버튼 클릭

## ⚠️ 주의사항

### 현재 제한사항
- 실제 거래소 API 연동은 구현되지 않음 (시뮬레이션 모드)
- 가격 데이터는 실제 거래소 DOM에서 추출해야 함
- 매크로는 사용자가 직접 거래소 버튼을 선택해야 함

### 안전한 테스트
- 실제 자금으로 테스트하지 마세요
- 데모 계정이나 소액으로만 테스트하세요
- 거래소의 이용약관을 확인하세요

### 사용 시 필수 사항
- **거래소 페이지를 먼저 열어야 합니다**: 익스텐션 팝업을 여는 것만으로는 content script가 로드되지 않습니다
- **페이지 새로고침**: 익스텐션을 수정한 후에는 거래소 페이지를 새로고침해야 합니다
- **한 탭에 하나**: 한 번에 하나의 거래소 페이지만 자동매매할 수 있습니다

## 📁 프로젝트 구조
```
tradingbot_extension/
├── manifest.json           # 익스텐션 매니페스트
├── background/
│   └── background.js       # 백그라운드 스크립트
├── content/
│   ├── content.js          # 콘텐츠 스크립트
│   └── content.css          # 콘텐츠 스타일
├── popup/
│   ├── popup.html          # 팝업 HTML
│   ├── popup.js            # 팝업 스크립트
│   └── popup.css            # 팝업 스타일
├── utils/
│   ├── indicators.js        # 기술적 지표 계산
│   ├── macro.js            # 매크로 실행 엔진
│   ├── assets.js           # 자산 관리 시스템
│   ├── trading.js          # 매매 로직
│   └── storage.js          # 데이터 저장 관리
├── assets/
│   ├── icon16.png          # 16x16 아이콘
│   ├── icon32.png          # 32x32 아이콘
│   ├── icon48.png          # 48x48 아이콘
│   └── icon128.png         # 128x128 아이콘
├── docs/
│   ├── SETUP_GUIDE.md      # 설치 가이드
│   ├── USER_GUIDE.md       # 사용자 가이드
│   └── API_REFERENCE.md    # API 참조
└── README.md               # 프로젝트 설명
```

## 🎯 지원하는 매매 전략

### 1. 볼린저 밴드 (기본)
- **매수 조건**: 현재 가격 < 하단 밴드
- **매도 조건**: 현재 가격 >= 중앙선
- **파라미터**: 기간(20), 표준편차(2.0)

### 2. RSI 과매도
- **매수 조건**: RSI < 30
- **매도 조건**: RSI > 70
- **파라미터**: 기간(14)

### 3. MACD 크로스오버
- **매수 조건**: MACD가 시그널선을 상향 돌파
- **매도 조건**: MACD가 시그널선을 하향 돌파
- **파라미터**: Fast(12), Slow(26), Signal(9)

### 4. 이동평균선 크로스
- **매수 조건**: 단기 MA가 장기 MA를 상향 돌파
- **매도 조건**: 단기 MA가 장기 MA를 하향 돌파
- **파라미터**: Fast(10), Slow(20)

### 5. 스토캐스틱 과매도
- **매수 조건**: K% < 20
- **매도 조건**: K% > 80
- **파라미터**: K(14), D(3)

## 🛠️ 사용 방법

### 매크로 설정
1. **녹화 시작**: 팝업에서 "매수 매크로 녹화" 또는 "매도 매크로 녹화" 클릭
2. **요소 선택**: 녹화 모드에서 클릭할 버튼들을 순서대로 선택
3. **녹화 완료**: ESC 키를 눌러 녹화 완료

### 전략 설정
1. **전략 선택**: 팝업에서 원하는 매매 전략 선택
2. **파라미터 조정**: 기간, 표준편차 등 조정
3. **거래 비율**: 전체 자산 대비 거래 비율 설정

### 모니터링
- **실시간 상태**: 팝업에서 현재 상태 확인
- **거래 내역**: 거래 내역 및 통계 확인
- **알림**: 거래 신호 및 오류 알림

## 🔧 설정 옵션

### 기본 설정
- **전략**: 사용할 매매 전략 선택
- **주문 타입**: 시장가 또는 지정가 선택
- **레버리지**: 1-100배 레버리지 설정
- **거래 비율**: 전체 자산 대비 거래 비율 (%)
- **지정가 차이**: 지정가 주문 시 가격 차이 (%)

### 자산 관리
- **실시간 잔고**: 거래소에서 자동으로 잔고 불러오기
- **포지션 크기**: 잔고, 레버리지, 거래 비율에 따른 자동 계산
- **거래 가능 여부**: 잔고 부족 시 자동 차단

### 알림 설정
- **매수 신호**: 매수 신호 발생 시 알림
- **매도 신호**: 매도 신호 발생 시 알림
- **주문 체결**: 주문 체결 시 알림
- **포지션 청산**: 포지션 청산 시 알림
- **오류**: 오류 발생 시 알림

### 고급 설정
- **볼린저 밴드 기간**: 이동평균 기간 (5-100)
- **표준편차**: 표준편차 배수 (1.0-3.0)
- **RSI 기간**: RSI 계산 기간 (5-50)
- **MACD 파라미터**: Fast, Slow, Signal 기간

## 🌐 지원하는 거래소
- **Gate.io**: [https://www.gate.io](https://www.gate.io)
- **Binance**: [https://www.binance.com](https://www.binance.com)
- **Upbit**: [https://www.upbit.com](https://www.upbit.com)
- **Coinbase**: [https://www.coinbase.com](https://www.coinbase.com)

## 📊 모니터링 및 분석

### 실시간 모니터링
- 현재가 및 기술적 지표 표시
- 포지션 상태 및 수익/손실 확인
- 거래 신호 및 알림 표시

### 거래 내역
- 모든 거래 내역 저장
- 수익/손실 계산
- 거래 통계 및 성과 분석

### 통계 정보
- 총 거래 횟수
- 수익 거래 횟수
- 승률
- 총 수익/손실
- 평균 수익/손실

## 🔒 보안 및 개인정보

### 데이터 보안
- 모든 데이터는 로컬에만 저장
- 외부 서버로 데이터 전송 없음
- 브라우저 종료 시에도 데이터 유지

### 거래 보안
- 소액으로 테스트 시작
- 손실 한도 설정
- 정기적인 모니터링

### 개인정보 보호
- 로그인 정보 저장 안함
- API 키 사용 안함
- 개인정보 수집 없음

## 🚨 문제 해결

### 일반적인 문제
1. **익스텐션이 작동하지 않음**: 브라우저 새로고침, 익스텐션 재설치
2. **매크로가 실행되지 않음**: 매크로 재녹화, 거래소 페이지 새로고침
3. **가격 데이터를 가져올 수 없음**: 거래소 페이지 새로고침, 다른 거래소 시도
4. **알림이 표시되지 않음**: 브라우저 알림 권한 확인

### 오류 코드
- **ERR_001**: 매크로를 찾을 수 없음
- **ERR_002**: 요소를 찾을 수 없음
- **ERR_003**: 가격 데이터 오류
- **ERR_004**: 권한 오류

## 📈 성능 최적화

### 메모리 관리
- 거래 내역 자동 정리 (최대 1000개)
- 불필요한 데이터 정기 삭제
- 브라우저 재시작 권장

### CPU 사용량
- 체크 간격 조정 (최소 5초)
- 불필요한 탭 닫기
- 다른 익스텐션 비활성화

### 네트워크 사용량
- 로컬 데이터만 사용
- 외부 API 호출 없음
- 최소한의 네트워크 사용

## 🔄 업데이트 및 유지보수

### 정기적인 점검
- **주간**: 매크로 동작 확인
- **월간**: 설정 최적화
- **분기**: 전략 성과 분석

### 업데이트 방법
1. 새 버전 다운로드
2. 기존 익스텐션 제거
3. 새 버전 설치
4. 설정 복원

## 📚 문서
- [설치 가이드](docs/SETUP_GUIDE.md)
- [사용자 가이드](docs/USER_GUIDE.md)
- [API 참조](docs/API_REFERENCE.md)

## 🤝 기여
1. Fork 프로젝트
2. Feature 브랜치 생성
3. 변경사항 커밋
4. Pull Request 생성

## 📄 라이선스
MIT License - 자유롭게 사용, 수정, 배포 가능

## ⚠️ 면책 조항
이 소프트웨어는 교육 및 연구 목적으로 제공됩니다. 실제 거래에 사용할 경우 발생하는 손실에 대해 개발자는 책임지지 않습니다. 투자는 본인의 책임 하에 진행하시기 바랍니다.

## 📞 지원
- **문제 보고**: GitHub Issues
- **기능 요청**: GitHub Discussions
- **문서**: 프로젝트 Wiki

---

**⭐ 이 프로젝트가 도움이 되었다면 Star를 눌러주세요!**